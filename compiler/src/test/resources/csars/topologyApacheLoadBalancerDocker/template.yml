tosca_definitions_version: tosca_simple_yaml_1_0_0_wd03
description: Apache load balancer partial topology for docker
template_name: apache-load-balancer-template-docker
template_version: 1.0.0-SNAPSHOT
template_author: MKV

imports:
  - apache-load-balancer:1.0.0-SNAPSHOT
  - docker-provider-types:*

topology_template:

  node_templates:

    WebServer:
      type: com.toscaruntime.docker.nodes.Container
      properties:
        image_id: toscaruntime/ubuntu-trusty
      requirements:
        - network: Internet

    LoadBalancerServer:
      type: com.toscaruntime.docker.nodes.Container
      properties:
        image_id: toscaruntime/ubuntu-trusty
        exposed_ports:
          - port: 80
        port_mappings:
          - from: 80
            to: 51000
      requirements:
        - network: Internet

# This is just to test a docker network, it's not the real public internet network
    Internet:
      type: com.toscaruntime.docker.nodes.Network
      properties:
        network_name: tomcatNet
        cidr: 10.67.79.0/24